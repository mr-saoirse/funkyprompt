---
description: Doing something useful in your first 10 minutes with funkyprompt
---

# 1. Ingesting data into a new instance

{% hint style="info" %}
The guides below are for fprompt install to your system. You can also run with poetry in which case prefix all commands with `poetry run` \<COMMAND>
{% endhint %}

You have [installed](../why-funkyprompt/install.md) the library and set your environment variables to make sure you have a storage configuration. While you can query existing data i.e. ask LLM questions about things that can be answered by existing functions and data, its more interesting to choose your own data. Choose your adventure

1. Ingest unstructured data from a webpage such as this one
2. Ingest structured data from any page with JSON+LD embedded

{% hint style="info" %}
The commands are the same except we assume that the data are unstructured if there is no JSON+LD on the page.
{% endhint %}

### 1 Unstructured data

Unstructured data can be ingested into a named store by just pointing to a web page. You can then investigate indexes over your. See the notebooks to explore viz etc

&#x20; Suppose you want to ingest a web page about FairyTales into a vector store

```python
from funkyprompt.ops.entities import AbstractVectorStoreEntry
#source your data
url = "https://www.gutenberg.org/files/20748/20748-h/20748-h.htm"
#create a type for it - it does not need any attributes unless you want to add some
class FairyTales(AbstractVectorStoreEntry):
    pass
```

There is a simple iterator that iterates over headers and paragraphs to iterate over these types

```python
from funkyprompt.io.tools.downloader import iterate_types_from_headed_paragraphs
data = list(iterate_types_from_headed_paragraphs(url, FairyTales))
```

Once you have typed data you can ingest it into a store (called FairyTales) in this case

<pre class="language-python"><code class="lang-python">from funkyprompt.io.stores import VectorDataStore 
#this will take a moment to generate the embeddings - by default OpenAI embeddings
<strong>vs = VectorDataStore(FairyTales)
</strong><strong>vs.add(data)
</strong># ask some questions
# vs("who is sinbad?")
</code></pre>

{% hint style="info" %}
To you other embeddings like Instruct check out the tutorial [5.-working-with-vector-searches-and-embeddings.md](5.-working-with-vector-searches-and-embeddings.md "mention")
{% endhint %}

Now that we have data we can use this with our agent.

The store can can allow is to ask questions and retrieve records. To make it explicty lets create a new function that loads this store and pass that to the agent. In practice we will want a more convenient discovery method but lets not get ahead of ourselves

```python
def get_information_on_fairy_tale_characters(question:str):
    """
    Provides details about fairy take characters 
    
    **Args**
        question: ask a question in sufficient detail
        
    **Returns**
        text details related to your question
    """
    vs = VectorDataStore(FairyTales)
    
    return vs(question)
```

Now that we have a function we can describe it and pass it to our agent

```python
from funkyprompt import describe_function, agent

agent("Who is sinbad and where did he eventually settle down?", 
      describe_function(get_information_on_fairy_tale_characters))
```

{% code overflow="wrap" %}
```
Sinbad is a character from Middle Eastern folk tales, known as Sinbad the Sailor. He went on seven adventurous and fantastical voyages, these tales filled with magical creatures, supernatural phenomena, and treacherous, often near-death experiences. After all his adventures and wanderings, Sinbad settled down in happiness and prosperity in Bagdad.
```
{% endcode %}

### 2 Structured data

We can ingest typed data. To start slowly we will show the idea but still use the textual data and text search and then afterward we will ingest more data and show more structured examples.&#x20;

_2.a Using the typing system but for simple text cases_

{% code overflow="wrap" %}
```python
from funkyprompt.io.stores import VectorDataStore, AbstractVectorStoreEntry

def get_recipes(what_to_cook: str):
    """
    Get recipes for making any food you want
    
    **Args**
        what_to_cook: provide a request for what you would like to make
        
    **Returns**
        returns recipe / instructions
        
    """
    vs = VectorDataStore(AbstractVectorStoreEntry.create_model('Recipe'))
    return vs(what_to_cook)

agent("give me a 5 bullet point summary obout what is involved in making kimchi", describe_function(get_recipes))  
```
{% endcode %}

I will not show the outputs in this case but lets look at what we need to do to ingest some data

{% hint style="info" %}
One way to scrape typed data is to look for pages that have Json+LD. following our last example we will want to be able to do the below. We will make use of that to generate sample data for `funkyprompt.`[`Schema.org`](https://schema.org) `defines many standard types.`
{% endhint %}

In this case we will pull in a recipe with the schema [type](https://schema.org/Recipe) and we will generate a Pydantic object which is the thing that `funkyprompt` uses.

```python
from funkyprompt.ops.entities import SchemaOrgVectorEntity
from funkyprompt.io.tools import downloader
url = 'https://www.maangchi.com/recipe/tongbaechu-kimchi'
data = downloader.get_page_json_ld_data(url) 
#make a type from the data - we generate Pydantic types to control the RAGs
RecipeType = SchemaOrgVectorEntity.create_model_from_schema("Recipe", data)
```

Once we have a type we can ingest validated data into our vector store

```python
vs = VectorDataStore(RecipeType)
vs.add([RecipeType(**data)])
```

And once we add data we can ask questions as per the examples above.

_2 Ingesting more structured data for statistical type questions_&#x20;





***

These examples are very simple just to illustrate the interface. The real question is how this scales with complexity of data and adding more functions. To learn more about creating different execution plans you can head over to [Broken link](broken-reference "mention") but in the meantime you can query your data to  either ask about one of the recipes or fairy tales. You gotta start somewhere.

The a key concern of `funkyprompt` is building [RAG](../why-funkyprompt/rag-systems.md) systems so we emphasize embedded data  and having your own data stores from the beginning. `funkyprompt` will make it easier to index and organize lots of data so you can experiment more easily with guiding agent programs.
